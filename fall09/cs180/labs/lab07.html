<html>

<head>
<title>CS 180: Data Structures</title>
</head>

<body>

<!-- begin table of contents -->
<center>
<a href="../index.html">Course Home</a> |
<a href="../policies.html">Course Policies</a> |
<A HREF="../homework/">Homework</A> |
<A HREF="http://mathcs.slu.edu/undergrad-cs/lab-hours">Lab Open Hours</A> |
<A HREF="../programming/">Programming</A> |
<b>Labs</b> |
<A HREF="../schedule.html">Schedule & Lecture Notes</A>
</center>
<!--  end table of contents  -->


<p>
<hr>

<h1>Lab Assignment 
07

</h1>

<table>
  <tr>
    <td>
	<b>Topic:</b>
    </td>
    <td>
	Overflowing Bookshelf
    </td>
  </tr>
  <tr>
    <td>
	<b>Source Code:</b>
    </td>
    <td>
	<tt>bookshelf.cpp</tt>
    </td>
  </tr>

  <tr>
    <td>
	<b>Test files:</b>
    </td>
    <td>
	<a href="bookshelf/bookshelf.in">Sample input file</a>
	<a href="bookshelf/bookshelf.out">Sample output file</a>
    </td>
  </tr>

  <tr>
    <td>
	<b>Live Archive Ref#:</b>
    </td>
    <td>
	<a href="http://acmicpc-live-archive.uva.es/nuevoportal/data/problem.php?p=3391">3391</a>
    </td>
  </tr>
  <tr>
    <td>
	<br>
	<b>In-Class Day:</b>
    </td>
    <td>
	<br>
	Thursday, Oct. 22, 2009

    </td>
  </tr>
  <tr>
    <td>
	<b>Submission Deadline:</b>
    </td>
    <td>
	Sunday, Oct. 25, 11:59pm

    </td>
  </tr>
  <tr>
    <td>
	<br>
	<b>Techniques:</b>
    </td>
    <td>
	<br>
	Use of a std::list and iterators.
    </td>
  </tr>
</table>

<p>
Please review the
<a href="../#general">general information about lab assignments</a>.


<hr>

<h1>Overflowing Bookshelf</h1>

<p>Agnes C. Mulligan is a fanatical bibliophile &#8211; she is constantly
buying new books, and trying to find space for those books. In
particular, she has a shelf for her &#8220;to be read&#8221; books, where she puts
her newest books. When she decides to read one of these books, she
removes it from the shelf, making space for more books. Sometimes,
however, she buys a new book and puts it on the shelf, but because of
limited space, this pushes one or more books off the shelf at the other
end. She always adds books on the left side of the shelf, making books
fall off the right side. Of course, she can remove a book from any
location on the shelf when she wants to read one. <br>
</p>
<p>Your task will be to write a simulator that will keep track of books
added and removed from a shelf. At the end of the simulation, display
the books remaining on the shelf, in order from left to right. Books in
each simulation will be identified by a unique, positive integer, 0
&lt; <span style="font-style: italic;">I</span> &#8804; 100. There are three
types of
events in the simulation:<br>
</p>
<ul>
  <li><span style="font-family: monospace;"> Add</span>: A new book is
pushed on the left end of the shelf, pushing
other books to the right as needed. No book moves to the right unless
it is pushed by an adjacent (touching) book on its left. Any book that
is not <span style="font-style: italic;">entirely </span>on the shelf
falls off
the right edge. No single book will ever be wider than the given shelf.
No book that is currently on the shelf will be added again. </li>
  <li><span style="font-family: monospace;"> Remove</span>: If the book
is on the shelf, then the book is removed
from the shelf, leaving a hole. If the book isn't on the shelf, the
operation is ignored.</li>
  <li><span style="font-family: monospace;"> End</span>: End the
simulation for this case and print the contents of
the shelf.</li>
</ul>
<p><span style="font-weight: bold;"> Input:</span> The input file will
contain data for one or more simulations. The end of the input is
signalled by a line containing -1. Each
simulation will begin with the integer width of the shelf, <span
 style="font-style: italic;">s</span>, 5 &#8804; <span
 style="font-style: italic;">s</span> &#8804; 100, followed by a series of <span
 style="font-family: monospace;">add</span> and <span
 style="font-family: monospace;">remove</span> events. An <span
 style="font-family: monospace;">add</span> event is a single line
beginning
with an upper case '<span style="font-family: monospace;">A</span>'
followed by the book ID, followed by the integer width of the book, <span
 style="font-style: italic;">w</span>, 0 &lt; <span
 style="font-style: italic;">w</span> &#8804; <span
 style="font-style: italic;">s</span>. A <span
 style="font-family: monospace;">remove</span> event is a single
line beginning with an upper case '<span style="font-family: monospace;">R</span>'
followed by the the book ID. Finally, the <span
 style="font-family: monospace;">end</span> event is a line
containing only a single upper case '<span
 style="font-family: monospace;">E</span>'. Each number in an event is
preceded by a single blank.<br>
</p>
<p> <b>Output:</b> For each simulation
case, print a single line containing a label (as shown in the output
sample), followed by the
list of IDs of books remaining on the shelf, in order
from left to right.<br>
</p>
<p></p>
<table border="1" cellpadding="2">
  <thead> <tr>
    <td> <b>Example input:</b> </td>
    <td style="vertical-align: top;"> <b>Example output:</b> </td>
  </tr>
  </thead> <tbody>
    <tr>
      <td><span style="font-family: monospace;">10<br>
R 3<br>
A 6 5<br>
A 42 3<br>
A 3 5<br>
A 16 2<br>
A 15 1<br>
R 16<br>
E<br>
7<br>
A 49 6<br>
A 48 2<br>
R 48<br>
E<br>
5<br>
A 1 1<br>
A 2 1<br>
A 3 1<br>
R 2<br>
A 4 1<br>
A 5 1<br>
R 5<br>
R 4<br>
A 6 1<br>
A 7 4<br>
E<br>
      </span><span style="font-family: monospace;">-1<br
 style="font-family: monospace;">
      </span> <span style="font-family: monospace;"></span></td>
      <td style="vertical-align: top;">
      <pre><span style="font-family: monospace;">PROBLEM 1: 15 3<br>PROBLEM 2:<br>PROBLEM 3: 7 6<br></span><span
 style="font-family: monospace;"></span><br><br></pre>
      </td>
    </tr>
  </tbody>
</table>


<hr>

<h1>Hints</h1>

<p>
This was a more difficult programming contest problem than the ones we
have seen in our earlier labs.  By the end of a five-hour contest, less
than 50% of the teams had successfully solved it, and the average
solving time for those who finished it was over 3 hours into the contest.
That said, it is a rather straightforward problem with proper use of
data structures.

<p>
The basic simulation sounds most like a queue, with new books placed
on one end of the shelf and old books falling off the other end of the
shelf. However, the rules also allow Agnes to remove a book from an
arbitrary position.  So for this reason, we are going to use a
<tt>list</tt> rather than a <tt>queue</tt>. We will store an
iterator for each book that is inserted, marking its position to
facilitate a later removal.  For each trial of the simulation, we
recommend that you declare the following variables:
<ul>
  <li>
      <b><nobr><tt>list&lt;int&gt; bookshelf;</tt></nobr></b>
      <br>
      IDs for the books currently on the shelf, ordered from left to
      right. At the beginning of the simulation, the bookshelf is empty.
  </li>
      <br>
  <li>
      <b><nobr><tt>int total(0);</tt></nobr></b>
      <br>
      The cumulative width of all books that are currently on the
      bookshelf.  Initially, this is zero since there are no books on
      the shelf.
  </li>
      <br>
  <li>
      <b><nobr><tt>vector&lt;int&gt; widths(101, 0);</tt></nobr></b>
      <br>
      An array designating the known widths for books.   This will be
      needed so that when individual books are removed, we can update
      the total width of the collection.

      Our syntax automatically constructs a vector with
      101&nbsp;entries, each initialized to width 0.  Note that we 
      use 101 so that we can use indices up to 100 inclusive (even though
      ID 0 is never used in the simulations).
  </li>
      <br>
  <li>
      <b><nobr><tt>vector&lt;list&lt;int&gt;::iterator&gt; locate(101, bookshelf.end());</tt></nobr></b>
      <br>
      A vector of iterators into the bookshelf list.  Specifically,
      <tt>locate[k]</tt> is an iterator marking the current position
      of book&nbsp<em>k</em> on the bookshelf, with
      <tt>bookshelf.end()</tt> designating the position of a book that
      is not currently on the shelf.
  </li>
</ul>


<p>
<em>Notes of warning:</em>
<ul>
  <li>
      When a new book is inserted, this may cause <em>multiple</em>
      books to fall off the other end.   So long as the combined width
      exceeds the shelf's width, you must keep popping old books off
      the end.
  </li>
      <br>
  <li>
      Remove might be called for a book that is not currently on the
      shelf.  In this case, you are to ignore the command 
      (yet not crash).
  </li>
      <br>
  <li>
      When outputting the results for a trial, you must get the
      spacing perfectly, making sure not to include any spurious
      spaces at the end of the line.
  </li>
</ul>


  </body>
</html>

